<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Confidence Intervals :: UPPAAL Documentation</title>
<link href=/css/nucleus.css?1704266148 rel=stylesheet><link href=/css/fontawesome-all.min.css?1704266148 rel=stylesheet><link href=/css/hybrid.css?1704266148 rel=stylesheet><link href=/css/featherlight.min.css?1704266148 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1704266148 rel=stylesheet><link href=/css/auto-complete.css?1704266148 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1704266148 rel=stylesheet><link href=/css/theme.css?1704266148 rel=stylesheet><link href=/css/tabs.css?1704266148 rel=stylesheet><link href=/css/hugo-theme.css?1704266148 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1704266148></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/language-reference/query-semantics/smc_queries/ci_estimation/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href><h1 style=font-weight:700;color:#fff>UPPAAL</h1></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1704266148></script><script type=text/javascript src=/js/auto-complete.js?1704266148></script><script type=text/javascript>var baseurl=""</script><script type=text/javascript src=/js/search.js?1704266148></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/gui-reference/ title="GUI Reference" class=dd-item><a href=/gui-reference/><b>1. </b>GUI Reference</a><ul><li data-nav-id=/gui-reference/menu-bar/ title="Menu Bar" class=dd-item><a href=/gui-reference/menu-bar/>Menu Bar</a><ul><li data-nav-id=/gui-reference/menu-bar/file/ title="File Menu" class=dd-item><a href=/gui-reference/menu-bar/file/>File Menu</a></li><li data-nav-id=/gui-reference/menu-bar/edit/ title="Edit Menu" class=dd-item><a href=/gui-reference/menu-bar/edit/>Edit Menu</a></li><li data-nav-id=/gui-reference/menu-bar/view/ title="View Menu" class=dd-item><a href=/gui-reference/menu-bar/view/>View Menu</a></li><li data-nav-id=/gui-reference/menu-bar/tools/ title="Tools Menu" class=dd-item><a href=/gui-reference/menu-bar/tools/>Tools Menu</a></li><li data-nav-id=/gui-reference/menu-bar/options/ title="Options Menu" class=dd-item><a href=/gui-reference/menu-bar/options/>Options Menu</a></li><li data-nav-id=/gui-reference/menu-bar/help/ title="Help Menu" class=dd-item><a href=/gui-reference/menu-bar/help/>Help Menu</a></li></ul></li><li data-nav-id=/gui-reference/toolbar/ title="Tool Bar" class=dd-item><a href=/gui-reference/toolbar/>Tool Bar</a></li><li data-nav-id=/gui-reference/system-editor/ title="System Editor" class=dd-item><a href=/gui-reference/system-editor/>System Editor</a><ul><li data-nav-id=/gui-reference/system-editor/navigation-tree/ title="Navigation Tree" class=dd-item><a href=/gui-reference/system-editor/navigation-tree/>Navigation Tree</a></li><li data-nav-id=/gui-reference/system-editor/drawing/ title=Drawing class=dd-item><a href=/gui-reference/system-editor/drawing/>Drawing</a></li><li data-nav-id=/gui-reference/system-editor/declarations/ title=Declarations class=dd-item><a href=/gui-reference/system-editor/declarations/>Declarations</a></li></ul></li><li data-nav-id=/gui-reference/symbolic-simulator/ title="Symbolic Simulator" class=dd-item><a href=/gui-reference/symbolic-simulator/>Symbolic Simulator</a><ul><li data-nav-id=/gui-reference/symbolic-simulator/simulation-control/ title="Simulation Control" class=dd-item><a href=/gui-reference/symbolic-simulator/simulation-control/>Simulation Control</a></li><li data-nav-id=/gui-reference/symbolic-simulator/variables/ title="Variables Panel" class=dd-item><a href=/gui-reference/symbolic-simulator/variables/>Variables Panel</a></li><li data-nav-id=/gui-reference/symbolic-simulator/process/ title="Process Panel" class=dd-item><a href=/gui-reference/symbolic-simulator/process/>Process Panel</a></li><li data-nav-id=/gui-reference/symbolic-simulator/sequence-charts/ title="Message Sequence Chart" class=dd-item><a href=/gui-reference/symbolic-simulator/sequence-charts/>Message Sequence Chart</a></li><li data-nav-id=/gui-reference/symbolic-simulator/symbolic-traces/ title="Symbolic Traces" class=dd-item><a href=/gui-reference/symbolic-simulator/symbolic-traces/>Symbolic Traces</a></li></ul></li><li data-nav-id=/gui-reference/concrete-simulator/ title="Concrete Simulator" class=dd-item><a href=/gui-reference/concrete-simulator/>Concrete Simulator</a><ul><li data-nav-id=/gui-reference/concrete-simulator/simulation-control/ title="Simulation Control" class=dd-item><a href=/gui-reference/concrete-simulator/simulation-control/>Simulation Control</a></li><li data-nav-id=/gui-reference/concrete-simulator/variables/ title="Variables Panel" class=dd-item><a href=/gui-reference/concrete-simulator/variables/>Variables Panel</a></li><li data-nav-id=/gui-reference/concrete-simulator/process/ title="Process Panel" class=dd-item><a href=/gui-reference/concrete-simulator/process/>Process Panel</a></li><li data-nav-id=/gui-reference/concrete-simulator/sequence-chart/ title="Message Sequence Chart" class=dd-item><a href=/gui-reference/concrete-simulator/sequence-chart/>Message Sequence Chart</a></li><li data-nav-id=/gui-reference/concrete-simulator/gantt-chart/ title="Gantt Chart Panel" class=dd-item><a href=/gui-reference/concrete-simulator/gantt-chart/>Gantt Chart Panel</a></li></ul></li><li data-nav-id=/gui-reference/verifier/ title=Verifier class=dd-item><a href=/gui-reference/verifier/>Verifier</a><ul><li data-nav-id=/gui-reference/verifier/specifying/ title="Specifying Requirements" class=dd-item><a href=/gui-reference/verifier/specifying/>Specifying Requirements</a></li><li data-nav-id=/gui-reference/verifier/verifying/ title="Verifying Requirements" class=dd-item><a href=/gui-reference/verifier/verifying/>Verifying Requirements</a></li></ul></li><li data-nav-id=/gui-reference/yggdrasil/ title="Test Cases (Yggdrasil)" class=dd-item><a href=/gui-reference/yggdrasil/>Test Cases (Yggdrasil)</a><ul><li data-nav-id=/gui-reference/yggdrasil/traces/ title="Generating Traces" class=dd-item><a href=/gui-reference/yggdrasil/traces/>Generating Traces</a></li><li data-nav-id=/gui-reference/yggdrasil/test-code/ title="Specifying Test Code" class=dd-item><a href=/gui-reference/yggdrasil/test-code/>Specifying Test Code</a></li><li data-nav-id=/gui-reference/yggdrasil/tutorial/ title=Tutorial class=dd-item><a href=/gui-reference/yggdrasil/tutorial/>Tutorial</a><ul><li data-nav-id=/gui-reference/yggdrasil/tutorial/basic-test-generation/ title="Basic Test Generation" class=dd-item><a href=/gui-reference/yggdrasil/tutorial/basic-test-generation/>Basic Test Generation</a></li><li data-nav-id=/gui-reference/yggdrasil/tutorial/using-variables/ title="Using Model Variables" class=dd-item><a href=/gui-reference/yggdrasil/tutorial/using-variables/>Using Model Variables</a></li><li data-nav-id=/gui-reference/yggdrasil/tutorial/using-queries/ title="Using Queries" class=dd-item><a href=/gui-reference/yggdrasil/tutorial/using-queries/>Using Queries</a></li></ul></li></ul></li></ul></li><li data-nav-id=/language-reference/ title="Language Reference" class="dd-item
parent"><a href=/language-reference/><b>2. </b>Language Reference</a><ul><li data-nav-id=/language-reference/system-description/ title="System Description" class=dd-item><a href=/language-reference/system-description/>System Description</a><ul><li data-nav-id=/language-reference/system-description/declarations/ title=Declarations class=dd-item><a href=/language-reference/system-description/declarations/>Declarations</a><ul><li data-nav-id=/language-reference/system-description/declarations/types/ title=Types class=dd-item><a href=/language-reference/system-description/declarations/types/>Types</a></li><li data-nav-id=/language-reference/system-description/declarations/functions/ title=Functions class=dd-item><a href=/language-reference/system-description/declarations/functions/>Functions</a></li><li data-nav-id=/language-reference/system-description/declarations/external-functions/ title="External Functions" class=dd-item><a href=/language-reference/system-description/declarations/external-functions/>External Functions</a></li></ul></li><li data-nav-id=/language-reference/system-description/templates/ title=Templates class=dd-item><a href=/language-reference/system-description/templates/>Templates</a><ul><li data-nav-id=/language-reference/system-description/templates/locations/ title=Locations class=dd-item><a href=/language-reference/system-description/templates/locations/>Locations</a></li><li data-nav-id=/language-reference/system-description/templates/edges/ title=Edges class=dd-item><a href=/language-reference/system-description/templates/edges/>Edges</a></li></ul></li><li data-nav-id=/language-reference/system-description/parameters/ title=Parameters class=dd-item><a href=/language-reference/system-description/parameters/>Parameters</a></li><li data-nav-id=/language-reference/system-description/system-definition/ title="System Definition" class=dd-item><a href=/language-reference/system-description/system-definition/>System Definition</a><ul><li data-nav-id=/language-reference/system-description/system-definition/template-instantiation/ title="Template Instantiation" class=dd-item><a href=/language-reference/system-description/system-definition/template-instantiation/>Template Instantiation</a></li><li data-nav-id=/language-reference/system-description/system-definition/progress-measures/ title="Progress Measures" class=dd-item><a href=/language-reference/system-description/system-definition/progress-measures/>Progress Measures</a></li><li data-nav-id=/language-reference/system-description/system-definition/gantt-chart/ title="Gantt Chart" class=dd-item><a href=/language-reference/system-description/system-definition/gantt-chart/>Gantt Chart</a></li></ul></li><li data-nav-id=/language-reference/system-description/priorities/ title=Priorities class=dd-item><a href=/language-reference/system-description/priorities/>Priorities</a></li><li data-nav-id=/language-reference/system-description/scope-rules/ title="Scope Rules" class=dd-item><a href=/language-reference/system-description/scope-rules/>Scope Rules</a></li><li data-nav-id=/language-reference/system-description/semantics/ title=Semantics class=dd-item><a href=/language-reference/system-description/semantics/>Semantics</a></li></ul></li><li data-nav-id=/language-reference/query-syntax/ title="Query Syntax" class=dd-item><a href=/language-reference/query-syntax/>Query Syntax</a><ul><li data-nav-id=/language-reference/query-syntax/symbolic_queries/ title="Syntax of Symbolic Queries" class=dd-item><a href=/language-reference/query-syntax/symbolic_queries/>Symbolic Queries</a></li><li data-nav-id=/language-reference/query-syntax/controller_synthesis/ title="Syntax of Controller Synthesis" class=dd-item><a href=/language-reference/query-syntax/controller_synthesis/>Controller Synthesis</a></li><li data-nav-id=/language-reference/query-syntax/statistical_queries/ title="Syntax of Statistical Queries" class=dd-item><a href=/language-reference/query-syntax/statistical_queries/>Statistical Queries</a></li><li data-nav-id=/language-reference/query-syntax/learning_queries/ title="Syntax of Learning Queries" class=dd-item><a href=/language-reference/query-syntax/learning_queries/>Learning Queries</a></li><li data-nav-id=/language-reference/query-syntax/strategy_queries/ title="Syntax of Strategy Queries" class=dd-item><a href=/language-reference/query-syntax/strategy_queries/>Strategy Queries</a></li></ul></li><li data-nav-id=/language-reference/query-semantics/ title="Query Semantics" class="dd-item
parent"><a href=/language-reference/query-semantics/>Query Semantics</a><ul><li data-nav-id=/language-reference/query-semantics/symb_queries/ title="Semantics of the Symbolic Queries" class=dd-item><a href=/language-reference/query-semantics/symb_queries/>Symbolic Queries</a></li><li data-nav-id=/language-reference/query-semantics/smc_queries/ title="Semantics of the Statistical Queries" class="dd-item
parent"><a href=/language-reference/query-semantics/smc_queries/>Statistical Queries</a><ul><li data-nav-id=/language-reference/query-semantics/smc_queries/ci_estimation/ title="Confidence Intervals" class="dd-item active"><a href=/language-reference/query-semantics/smc_queries/ci_estimation/>Confidence Intervals</a></li></ul></li></ul></li><li data-nav-id=/language-reference/expressions/ title=Expressions class=dd-item><a href=/language-reference/expressions/>Expressions</a><ul><li data-nav-id=/language-reference/expressions/identifiers/ title=Identifiers class=dd-item><a href=/language-reference/expressions/identifiers/>Identifiers</a></li></ul></li><li data-nav-id=/language-reference/reserved-keywords/ title="Reserved Keywords" class=dd-item><a href=/language-reference/reserved-keywords/>Reserved Keywords</a></li></ul></li><li data-nav-id=/toolsandapi/ title="Tools & API" class=dd-item><a href=/toolsandapi/><b>3. </b>Tools & API</a><ul><li data-nav-id=/toolsandapi/uppaal/ title=UPPAAL class=dd-item><a href=/toolsandapi/uppaal/>UPPAAL</a></li><li data-nav-id=/toolsandapi/verifyta/ title=verifyta class=dd-item><a href=/toolsandapi/verifyta/>verifyta</a></li><li data-nav-id=/toolsandapi/javaapi/ title="Java API" class=dd-item><a href=/toolsandapi/javaapi/>Java API</a></li><li data-nav-id=/toolsandapi/socketserver/ title=Socketserver class=dd-item><a href=/toolsandapi/socketserver/>Socketserver</a></li><li data-nav-id=/toolsandapi/file-formats/ title="File Formats" class=dd-item><a href=/toolsandapi/file-formats/>File Formats</a></li><li data-nav-id=/toolsandapi/latex/ title=Latex class=dd-item><a href=/toolsandapi/latex/>Latex</a></li></ul></li><li data-nav-id=/extensions/ title=Extensions class=dd-item><a href=/extensions/><b>4. </b>Extensions</a><ul><li data-nav-id=/extensions/cora/ title=CORA class=dd-item><a href=/extensions/cora/>CORA</a></li><li data-nav-id=/extensions/ecdar/ title=ECDAR class=dd-item><a href=/extensions/ecdar/>ECDAR</a></li><li data-nav-id=/extensions/tiga/ title="UPPAAL Tiga" class=dd-item><a href=/extensions/tiga/>UPPAAL Tiga</a></li><li data-nav-id=/extensions/tron/ title="UPPAAL TRON" class=dd-item><a href=/extensions/tron/>UPPAAL TRON</a></li></ul></li><li data-nav-id=/preview-build/ title class=dd-item><a href=/preview-build/></a></li></ul><section id=footer><p>(c) 1995-2023 <a href=https://www.uppaal.org>UPPAAL</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title='Edit this page' href=https://github.com/UPPAALModelChecker/docs.uppaal.org/blob/master/content/language-reference/query-semantics/smc_queries/ci_estimation.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/></a>> <a href=/language-reference/>Language Reference</a> > <a href=/language-reference/query-semantics/>Query Semantics</a> > <a href=/language-reference/query-semantics/smc_queries/>Semantics of the Statistical Queries</a> > Confidence Intervals</span></div><div class=progress><div class=wrapper><nav id=TableOfContents></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Confidence Intervals</h1><p>Probability estimation query <tt>Pr[&mldr;](&lt;> q)</tt> yields a confidence interval (CI) for the probability of the state expression <tt>q</tt> being true with the confidence level of <tt>1-α</tt>. For example, it could be <tt>[0.45, 0.55]</tt> (<tt>95%</tt> CI), or could be written as <tt>0.5 ± 0.05</tt> (<tt>95%</tt> CI), where <tt>ε=0.05</tt> and <tt>α=0.05</tt>.</p><p>The frequentist interpretation of CI is that there exists a true probability that the state expression <tt>q</tt> is true and it is included in that confidence interval, but there is a risk α of making an error (the true probability being outside the confidence interval).</p><p>Chernoff-Hoeffding bound <tt>N=ln(2/α)/(2ε<sup>2</sup>)</tt> provides an intuition that the number of required samples (runs) N is inversely proportional to <tt>ε<sup>2</sup></tt> and proportional to the <tt>ln(1/α)</tt>. This result assumes that the measurements are sampled from a continuous interval <tt>[0,1]</tt> which makes it overly conservative. For example, for <tt>α=0.05</tt> and <tt>ε=0.05</tt> it requires <tt>738</tt> runs irrespective of the actual probability. However, if the samples are constrained to either <tt>0</tt> or <tt>1</tt> and we observe a repetitive sequence of <tt>30</tt> successes we could conclude much earlier with <tt>[0.9,1]</tt> (<tt>95%</tt> CI) just by using a <a href=https://en.wikipedia.org/wiki/Rule_of_three_(statistics)>statistical rule of three</a>.</p><p>Instead, UPPAAL uses Clopper-Pearson exact method for binomial distribution which samples from <tt>{0,1}</tt> and provides more precise bounds with fewer runs, especially when the probability is close to <tt>0</tt> or <tt>1</tt>.</p><p>If the number of runs is not specified in the query, then the probability estimation uses Clopper-Pearson algorithm sequentially to determine when to stop generating the simulation runs thus allowing earlier termination. Therefore the number of runs is sensitive to <tt>α</tt>, <tt>ε</tt> and also the estimated probability itself. The α and ε parameters are controlled in the <a href=/gui-reference/menu-bar/options/#statparam>statistical parameters</a> of engine options.</p><p>The following plots show the number of samples (runs) required to estimate the confidence interval using the exact method sequentially for a given <tt>α</tt>, <tt>ε</tt> and the true probability (estimating <tt>P>0.5</tt> is symmetric to estimating <tt>1-P</tt>):
<img src=../ci_run_0.05.png alt="CIs for &amp;epsilon;=0.05">
For example, for the default parameter values <tt>ε=0.05</tt> and <tt>α=0.05</tt> the sequential algorithm requires <tt>411</tt> — the highest number of samples (runs) — when the probability is close to <tt>0.5</tt>, where the uncertainty is the highest. Whereas the algorithm cannot distinguish the true probabilities <tt>≤ ε</tt> (<tt>0.05</tt>) and thus could terminate much earlier: after <tt>72</tt> runs. Note that the uncertainty of the required runs is the largest when the true probability is close to either <tt>0</tt> or <tt>1</tt>.</p><p>The following plot shows the number of samples (runs) required when the width of the interval is halved to <tt>ε=0.025</tt>:
<img src=../ci_run_0.025.png alt="CIs for &amp;epsilon;=0.025">
The following plot shows the number of samples (runs) required when the width of the interval is even more narrow <tt>ε=0.01</tt>:
<img src=../ci_run_0.01.png alt="CIs for &amp;epsilon;=0.01"></p><p>The following series of plots demonstrates how the estimated confidence interval converges to the true probability <tt>P</tt> value as more samples are produced:</p><p><img src=../ci_0.5.png alt="CIs for P=0.5">
<img src=../ci_0.2.png alt="CIs for P=0.2">
<img src=../ci_0.1.png alt="CIs for P=0.1">
<img src=../ci_0.05.png alt="CIs for P=0.05">
<img src=../ci_0.01.png alt="CIs for P=0.01">
<img src=../ci_0.png alt="CIs for P=0"></p><p>Note that occasionally the confidence intervals may overstep and thus exclude the true probability value, which should not happen more often than the specified level of significance <tt>α</tt>.</p><p>The following sequence of plots show how the width of the confidence intervals converges as more samples are produced:</p><p><img src=../ciw_0.5.png alt="P=0.5">
<img src=../ciw_0.2.png alt="P=0.2">
<img src=../ciw_0.1.png alt="P=0.1">
<img src=../ciw_0.05.png alt="P=0.05">
<img src=../ciw_0.01.png alt="P=0.01">
<img src=../ciw_0.png alt="P=0"></p><p>Note that in case of extreme probability value (close to <tt>0</tt> or <tt>1</tt>, e.g. <tt>P=0.01</tt>), repeated observations are more likely and thus they may create false confidence that the probability is extreme (i.e. <tt>0</tt> or <tt>1</tt>), but then a single differing observation may disturb the interval size greately and therefore more samples are required than just single sided interval.</p><p>Several sequential CI estimation algorithms for binomial proportion are described in the literature below.</p><blockquote><p><em>Fixed-Width Sequential Confidence Intervals for a Proportion</em>, <strong>Jesse Frey</strong>. The American Statistician Volume 64, 2010 - Issue 3. <a href=https://doi.org/10.1198/tast.2010.09140>doi:10.1198/tast.2010.09140</a></p></blockquote><blockquote><p><em>Exact Group Sequential Methods for Estimating a Binomial Proportion</em>, <strong>Zhengjia Chen</strong> and <strong>Xinjia Chen</strong>. Journal of Probability and Statistics, 2013, special issue &ldquo;Adaptive and Sequential Methods for Clinical Trials&rdquo;. <a href=https://doi.org/10.1155/2013/603297>doi:10.1155/2013/603297</a></p></blockquote><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/language-reference/query-semantics/smc_queries/ title="Semantics of the Statistical Queries"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/language-reference/expressions/ title=Expressions style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1704266148></script><script src=/js/perfect-scrollbar.min.js?1704266148></script><script src=/js/perfect-scrollbar.jquery.min.js?1704266148></script><script src=/js/jquery.sticky.js?1704266148></script><script src=/js/featherlight.min.js?1704266148></script><script src=/js/highlight.pack.js?1704266148></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1704266148></script><script src=/js/learn.js?1704266148></script><script src=/js/hugo-learn.js?1704266148></script><script src=/mermaid/mermaid.js?1704266148></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>